<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        html, body, #player_b, #player4 {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
        }
      </style>
</head>
<body>
    <div id="player_b">
			<div id="player4"></div>
    </div>
    
    <script>
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
			m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
			(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
		 
			ym(53346148, "init", {
				 clickmap:true,
				 trackLinks:true,
				 accurateTrackBounce:true
        });
        
        function adBlockNotDetected() {
		var player = new Playerjs({id:"player4", file:`https://maldar.b-cdn.net/t/index.m3u8`});
        }
        function adBlockDetected() {
        	document.getElementById('player_b').innerHTML = '<div class="warning align_center"><img class="free_logo" src="//cdnliveball7.b-cdn.net/public/img/free_logo.png"><h2>Дорогой зритель!</h2> <span>У тебя включен AdBlock (блокируется реклама) и из-за этого здесь нет трансляции. Пожалуйста, <a class="free_a" href="https://geekon.media/otklyuchaem-adblock-v-brauzerax/">выключи его</a> и тогда ты сможешь смотреть матч. Наш сайт показывает для тебя трансляции бесплатно. <a class="free_a" href="https://geekon.media/otklyuchaem-adblock-v-brauzerax/">Отключив AdBlock</a>, ты поможешь развитию сайта LiveBall!</span></div>';
        }
        
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }
        
        const videoId = getParameterByName('v');
        
        if(videoId !== null && videoId !== '') {
            if( typeof fuckAdBlock !== 'undefined' || typeof FuckAdBlock !== 'undefined' ) {
				adBlockDetected();
			} else {
				var importFAB = document.createElement('script');
				importFAB.onload = function() {
					fuckAdBlock.onDetected(adBlockDetected)
					fuckAdBlock.onNotDetected(adBlockNotDetected);
				};
				importFAB.onerror = function() {
					adBlockDetected(); 
				};
				importFAB.integrity = 'sha256-xjwKUY/NgkPjZZBOtOxRYtK20GaqTwUCf7WYCJ1z69w=';
				importFAB.crossOrigin = 'anonymous';
				importFAB.src = 'https://cdnjs.cloudflare.com/ajax/libs/fuckadblock/3.2.1/fuckadblock.min.js';
				document.head.appendChild(importFAB);
			}
        }
    </script>
</body>
</html>
